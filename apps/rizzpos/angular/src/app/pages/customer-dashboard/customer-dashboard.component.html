<rizzpos-header [title]="'Customer Dashboard'"></rizzpos-header>

<ion-content class="ion-padding">
  <ng-container *ngIf="customerData$ | async as customerData">
    <ion-card>
      <ion-card-header>
        <ion-card-title>Welcome, {{ customerData.name }}</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p>Loyalty Points: {{ loyaltyPoints }}</p>
      </ion-card-content>
    </ion-card>

    <ion-card>
      <ion-card-header>
        <ion-card-title>Recent Transactions</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item *ngFor="let transaction of recentTransactions$ | async">
            <ion-label>
              <h2>{{ transaction.date | date:'short' }}</h2>
              <p>Total: {{ transaction.total | currency }}</p>
            </ion-label>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

    <ion-card>
      <ion-card-header>
        <ion-card-title>Active Promotions</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item *ngFor="let promotion of promotions$ | async">
            <ion-label>
              <h2>{{ promotion.title }}</h2>
              <p>{{ promotion.description }}</p>
              <p>Expires: {{ promotion.expiryDate | date:'mediumDate' }}</p>
            </ion-label>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>
  </ng-container>
</ion-content>

<rizzpos-footer></rizzpos-footer>